<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="popup.css">
    <title>Smart Tab Manager Pro</title>
</head>
<body>
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <h2 style="margin: 0;">Open Tabs</h2>
        <button id="settingsBtn" style="background: #6c757d; color: white; border: none; padding: 6px 10px; border-radius: 4px; cursor: pointer; font-size: 12px;" title="Customize domain categories">
            ⚙️ Settings
        </button>
    </div>
    <input type="text" id="searchInput" placeholder="Search your tabs...">

    <h3>⭐ Favorite Tabs</h3>
    <div style="display: flex; gap: 8px; margin-bottom: 10px;">
        <button id="storeFavoritesBtn">🔄 Sync Favorites</button>
        <button id="clearFavoritesBtn">🗑️ Clear All Favorites</button>
    </div>
    <div style="margin-bottom: 10px;">
        <div class="sorting-controls">
            <label for="sortFavorites"><span class="sort-icon">⇅</span> Sort Favorites:</label>
            <select id="sortFavorites">
                <option value="recent">Recently Bookmarked</option>
                <option value="domain">By Domain Frequency</option>
            </select>
        </div>
    </div>
    <div style="margin-bottom: 14px;">
        <button id="openAnalyticsBtn" style="width: 100%; padding: 8px; background-color: #0078d7; color: white; border: none; border-radius: 5px;" aria-label="View tab usage analytics">
            📈 View Analytics
        </button>
    </div>
    
    <ul id="favoriteList"></ul>

    <h3 id="toggleAllTabs" style="cursor: pointer;">📂 All Tabs ⯈</h3>
    <ul id="tabList" class="tab-list" style="display: none;"></ul>

    <h3 id="focusToggleHeader" style="cursor: pointer;">🔒 Focus Mode ⯈</h3>

    <div id="focusModeSection" style="display: none; padding-left: 8px;">
        <button id="focusToggleBtn" class="toggle-btn">🔘 Activate Focus Mode</button>

        <div style="margin-top: 10px; display: flex; flex-direction: column; gap: 6px;">
            <div style="display: flex; gap: 6px;">
                <input 
                    type="text" 
                    id="blockDomainInput" 
                    placeholder="Domain to block (e.g. youtube.com)" 
                    style="flex: 2; padding: 8px; border-radius: 6px; border: 1px solid #ccc;"
                />
                <input 
                    type="number" 
                    id="blockDurationInput" 
                    placeholder="Time (min)" 
                    min="0" 
                    style="width: 80px; height: 18px; padding: 8px; border-radius: 6px; border: 1px solid #ccc;"
                    title="Optional time to allow access before blocking"
                />
                <button 
                    id="addBlockDomainBtn" title="Block this domain"
                    style="padding: 8px 12px; height: 38px; background-color: #f5f5f5; border: none; border-radius: 6px; font-weight: 500; cursor: pointer;"
                >
                    ➕ Add
                </button>
            </div>
            <small style="color: #666; font-size: 12px;">
                Leave time empty to block permanently
            </small>
        </div>

        <ul id="blockedDomainsList" style="margin-top: 10px; padding-left: 0;"></ul>
    </div>

    <h3 id="aiInsightsHeader" style="cursor: pointer;">🧠 AI Insights ⯈</h3>
    
    <div id="aiInsightsSection" class="ai-insights-section" style="display: none;">
        <div id="insightsContainer"></div>
        <div id="recommendationsContainer"></div>
        <div id="categoryBreakdownContainer"></div>
        <button id="refreshInsightsBtn">🔄 Refresh Insights</button>
    </div>
    
    <!-- Advanced Features Section -->
    <h3 id="advancedFeaturesHeader" style="cursor: pointer;">🚀 Advanced Features ⯈</h3>
    
    <div id="advancedFeaturesSection" style="display: none; margin-bottom: 14px; padding: 10px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9;">
        <div style="display: flex; flex-direction: column; gap: 6px;">
            <button id="groupTabsBtn" style="padding: 6px; background: #28a745; color: white; border: none; border-radius: 4px; font-size: 12px;">
                👥 Group Tabs by Domain
            </button>
            <div style="display: flex; gap: 4px;">
                <button id="exportDataBtn" style="flex: 1; padding: 6px; background: #17a2b8; color: white; border: none; border-radius: 4px; font-size: 12px;">
                    📤 Export Data
                </button>
                <button id="saveSessionBtn" style="flex: 1; padding: 6px; background: #ffc107; color: #212529; border: none; border-radius: 4px; font-size: 12px;">
                    💾 Save Session
                </button>
            </div>
            <input type="file" id="importDataInput" accept=".json" style="display: none;">
            <button id="importDataBtn" style="padding: 6px; background: #6c757d; color: white; border: none; border-radius: 4px; font-size: 12px;">
                📥 Import Data
            </button>
        </div>
    </div>

    <script type="module" src="popup.js"></script>
</body>
</html>
